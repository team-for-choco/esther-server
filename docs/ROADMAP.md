# Esther Server 로드맵

> 기존 기획([20260205_plan_server_features.md](20260205_plan_server_features.md))과
> 서버 분석([20260210_analyze_server_features.md](20260210_analyze_server_features.md))을 기반으로 정리한 전체 로드맵.

## 완료된 작업

- [x] 프로젝트 초기 설정
- [x] 커스텀 생선 (CHOCO-74) — 테스트 생선, 구운 테스트 생선
- [x] 커스텀 작물 (CHOCO-75) — 테스트 작물
- [x] 루트 모디파이어 조건 타입 수정 (#3)
- [x] 루트 모디파이어 replace 방식 구현 (CHOCO-76)
- [x] 커스텀 광물 + 월드젠 (CHOCO-77) — 테스트 광석(석재/딥슬레이트), 원석, 주괴
- [x] 아이템 등급 시스템 Phase 1 (CHOCO-78) — 일반/고급/희귀, 시각 표시
- [x] 한국식 작물 추가 (CHOCO-79) — 쌀, 고추, 시금치
- [x] Phase 1 코드 정리 (CHOCO-80) — 레거시 제거, example 제거, 테스트 유틸 추출
- [x] 슬리핑 시스템 (CHOCO-81) — 1명 수면 밤 넘기기, 채팅 알림
- [x] 낮 시간 연장 (CHOCO-82) — 낮 3배 연장 (설정 가능)
- [x] 앉기 기능 (CHOCO-83) — 계단/반블록 앉기
- [x] 요리 시스템 (CHOCO-84) — 조리대 우클릭 상호작용, 한식 4종
- [x] 도감 시스템 Phase A (CHOCO-85) — 도감대 블록, 등급별 수집 46항목, GUI
- [x] 도감 시스템 Phase B (CHOCO-86) — 마일스톤 7종, 칭호 시스템, /title 명령어
- [x] 청크 클레임 기본 구현 (CHOCO-87) — 토지 증서, 블록 보호, /claim 명령어
- [x] 요리 멀티플레이어 개선 + 칭호 수정 (CHOCO-88) — 재료 분리, 태그 검증, 칭호 Team 방식
- [x] 모드 배포 자동화 (CHOCO-89) — GitHub Actions + packwiz + Prism Launcher
- [x] 청크 클레임 행동 제한 설정 (CHOCO-90) — /claim settings로 파괴/설치/상호작용 권한 관리
- [x] 청크 클레임 신뢰 시스템 (CHOCO-91) — /claim trust로 플레이어 초대, 소유자와 동일 권한
- [x] 화폐 시스템 (CHOCO-92) — 잔고 기반 "에스더의 기운", /sell 판매, /money 송금, HUD 오버레이
- [x] NPC 상인 (CHOCO-93) — 빌리저 외형 NPC, 상점 GUI, 구매 가격표, /shop 명령어
- [x] 상인 시스템 개선 (CHOCO-94) — 카테고리별 전문 상인, 판매 탭, /sell 삭제
- [x] 레벨/장비 효과 시스템 (CHOCO-100) — 전문 레벨/장비 강화별 분야 보너스

---

## Phase 1: 콘텐츠 기반 확장

> 광물을 추가하고 아이템 등급 시스템 기반을 만든다.

- [x] ~~**1-1. 루트 모디파이어 replace 방식 구현**~~ (CHOCO-76)
- [x] ~~**1-2. 커스텀 광물 + 월드젠**~~ (CHOCO-77)
- [x] ~~**1-3. 아이템 등급/품질 시스템**~~ (CHOCO-78)
  - 일반(Common 70%)/고급(Fine 25%)/희귀(Rare 5%) 3등급
  - DataComponents 기반, 글로벌 루트 모디파이어로 태그 기반 부여
  - Phase 1: 시각 표시(이름 색상 + 툴팁)만 구현
  - 대상: 생선/작물/광물 10종
- [x] ~~**1-4. 한국식 작물 추가**~~ (CHOCO-79)
  - 쌀, 고추, 시금치 3종 작물
  - CustomCropBlock 범용 클래스, 쌀 조리 레시피, 등급 시스템 연동
  - 참고: 별농서버

## Phase 1.5: QoL 1차

> 대형 시스템 전 가벼운 작업으로 서버 기본 체감 개선.

- [x] ~~**1.5-1. 슬리핑 시스템**~~ (CHOCO-81)
  - 1명만 자도 밤 넘기기 + 채팅 알림
- [x] ~~**1.5-2. 낮 시간 연장**~~ (CHOCO-82)
  - 낮 시간 3배 연장 (설정 가능, 1~10배)
  - 참고: Wispwood (낮 3배)
- [x] ~~**1.5-3. 앉기**~~ (CHOCO-83)
  - 계단/반블록 빈 손 우클릭 시 앉기, Shift로 일어서기

## Phase 2: 콘텐츠 순환

> 생선+작물+광물을 **연결**하는 시스템.

- [x] ~~**2-1. 요리 시스템**~~ (CHOCO-84) ★★★
  - 전용 조리대 블록 (관리자 전용, 파괴 불가)
  - 우클릭 상호작용으로 재료 순서대로 투입, 빈 손 우클릭 완성
  - 한식 요리 4종: 시금치비빔밥, 생선찌개, 김밥, 수확물비빔밥
  - 재료 등급 기반 결과물 등급 확률 조정
  - 버프 효과는 추후 추가 예정
  - 참고: 띵타이쿤 (요리 등급+가격 변동), 악어놀이터
- [x] ~~**2-2. 도감 시스템 Phase A**~~ (CHOCO-85) ★★★★
  - 도감대 블록, 아이템 등록 (등급별 별도 수집, 46항목)
  - 플레이어별 데이터 저장 (AttachmentType, copyOnDeath)
  - 도감 GUI (G키, 카테고리 탭, 진행률)
  - Phase B (마일스톤+칭호) — CHOCO-86으로 완료
  - 참고: 띵타이쿤 (도감이 서버 핵심 동력), 악어놀이터 (도감→스탯 상승)
- [x] ~~**2-2b. 도감 시스템 Phase B**~~ (CHOCO-86) ★★★
  - 마일스톤 7종 (첫 발견, 생선/농산물/광물/요리 완성, 절반 달성, 전체 완성)
  - 칭호 시스템 (닉네임 접두어 표시, 채팅+탭 목록)
  - 도감 GUI 칭호 탭, /title 명령어
  - 마일스톤 달성 시 서버 전체 공지
- [x] ~~**2-3. 요리/칭호 멀티플레이어 개선**~~ (CHOCO-88) ★★
  - 요리: 플레이어별 재료 분리, cooking_ingredient 태그 검증
  - 칭호: TAB 중복 수정, Scoreboard Team 방식 → 채팅/TAB/머리 위 네임태그 모두 표시

## Phase 2.5: QoL 2차 — 땅 보호 시스템

- [x] ~~**2.5-1. 청크 클레임 기본 구현**~~ (CHOCO-87) ★★★
  - 토지 증서 아이템, SavedData 기반 청크 소유권 저장
  - 블록 파괴/설치 보호 (OP 우회), /claim info|remove|list 명령어

### 토지 증서 아이템
- 커스텀 아이템 "토지 증서"를 사용하여 청크를 클레임
- 1개 = 1청크 (16x16), 전체 높이 (Y: 0~319) 보호
- 추후 Y축 범위 세분화 가능하도록 여지를 남김

### 획득 경로 (Phase에 따라 점진 확장)
| Phase | 획득 방법 | 비고 |
|-------|-----------|------|
| 초기 | 최초 접속 시 1개 지급 | 모든 플레이어에게 첫 거점 보장 |
| Phase 2 (도감) | 도감 달성 보상 | 예: 50개 수집 시 1개, 100개 시 1개 |
| Phase 3 (경제) | 상점에서 화폐로 구매 | 추가 획득 경로 |

### 보호 기능
- [x] ~~**2.5-1. 청크 클레임 기본 구현**~~ ★★★ (CHOCO-87)
  - 토지 증서 아이템 등록
  - 청크 소유권 데이터 저장/로드
  - 토지 증서 사용 시 해당 청크 클레임
  - 여러 청크 소유 가능 (인접하지 않아도 됨)
- [x] ~~**2.5-2. 행동 제한 설정**~~ (CHOCO-90) ★★★
  - 소유자가 허용/금지 항목 설정 가능:
    - 블록 파괴/설치
    - 상호작용 (상자, 문, 레버 등)
  - 기본값: 블록 파괴/설치 금지, 상호작용 허용
  - `/claim settings` 명령어로 조회/변경
- [x] ~~**2.5-3. 플레이어 초대 (신뢰)**~~ (CHOCO-91) ★★☆
  - 소유자가 특정 플레이어를 초대하여 함께 활동 가능
  - 초대된 플레이어는 소유자와 동일한 권한
  - `/claim trust add/remove/list` 명령어

## 인프라: 배포 자동화

- [x] ~~**모드 배포 자동화**~~ (CHOCO-89) ★★★
  - GitHub Actions: main 머지 → 빌드 → Release → modpack 자동 업데이트
  - packwiz + Prism Launcher: 클라이언트 자동 업데이트
  - 서버 업데이트 스크립트 (scripts/update-server.sh)

## Phase 3: 경제

> 거래할 컨텐츠가 다양해진 후 경제 시스템 도입.

- [x] ~~**3-1. 화폐 시스템**~~ (CHOCO-92) ★★★
  - 잔고 기반 단일 화폐 "에스더의 기운", /sell 판매, /money 송금, HUD 오버레이
- ~~**3-2. 플레이어 상점**~~ *(스킵)*
- [x] ~~**3-3. NPC 상인**~~ (CHOCO-93) ★★★
  - NPC 엔티티 (빌리저 외형), 상점 GUI, 구매 가격표 (씨앗/식재료/광물/토지 증서)
  - /shop summon, /shop remove 관리자 명령어
- [x] ~~**3-4. 상인 시스템 개선**~~ (CHOCO-94) ★★★
  - 카테고리별 전문 상인 (씨앗/식재료/광물/특수)
  - 상점 GUI 판매 탭 추가 (인벤토리 아이템 판매)
  - /sell 명령어 삭제 → NPC 상점으로 통합

## Phase 4: 성장/전문화

> 장기 플레이를 위한 이중 성장 시스템 (전문 레벨 + 장비 강화).

- [x] ~~**4-1a. 전문 레벨 시스템**~~ (CHOCO-95) ★★★
  - 4분야 (낚시/농사/채광/요리) 경험치 추적 + 레벨업
  - 등급별 XP (일반 1 / 고급 3 / 희귀 5), 최대 Lv50
  - AttachmentType 기반 데이터 저장
- [x] ~~**4-1b. 장비 강화 시스템**~~ (CHOCO-96) ★★★★
  - 전용 장비 4종 등록, 대장장이 NPC, 강화 GUI
  - 확률 강화 (Lv0~5), 강화석 (채광/낚시 Lv4+ 드롭)
  - 장비 등급: 일반(Lv0~2) / 고급(Lv3~4) / 희귀(Lv5)
- [x] ~~**4-1c. 전문 분야 현황 GUI**~~ (CHOCO-97) ★★
  - 분야별 레벨/경험치, 장비 강화 현황 조회 화면
- [x] ~~**4-1d. 특수 장비 기능화 + 특수 농사용 흙**~~ (CHOCO-98) ★★★
  - 특수 장비 4종 도구화, 특수 농지 + 분무기, XP 게이팅
- ~~**4-2. 스킬 트리**~~ *(스킵)*
- [x] ~~**4-3. 레벨/장비 효과 시스템**~~ (CHOCO-100) ★★★★
  - 전문 레벨에 따른 분야별 보너스 (Lv10 XP+20%, Lv20 고급+5%, Lv30 XP+50%, Lv40 희귀+3%, Lv50 분야별 고유)
  - 장비 강화 레벨에 따른 분야별 보너스 (낚시 Lure, 농사 다수확, 요리 희귀 등급)

---

## 추후 검토 (Phase 4 이후)

| 기능 | 참고 서버 | 비고 |
|------|-----------|------|
| 일일/주간 퀘스트 | 동물촌락, BugMC | 도감+경제 완성 후 퀘스트 보상 설계 |
| 우편함/선물 시스템 | - | 소셜 기능, 핵심 루프 완성 후 |
| 계절 시스템 | Wispwood, 별농서버 | 한국식 작물과 시너지. 구현 복잡도 높음 |
| 시즌 이벤트 | BugMC | 운영 단계에서 추가 |
| 근접 음성채팅 | 냥팜 | 별도 모드(Simple Voice Chat) 설치로 해결 |
| 커스텀 텍스처 교체 | - | 바닐라 텍스처 재활용 중. 아트 작업 필요 시 진행 |
| 아이템 효과 심화 | 초기 기획 | 등급별 차등화: 희귀(새 효과), 특별(유니크). 일반(바닐라 스타일) 이후 확장 |

---

## 흐름도

```
[완료] 생선 ✅ → 작물 ✅ → replace 수정 ✅ → 광물 ✅ → 등급 시스템 ✅ → 한국식 작물 ✅ → Phase 1 정리 ✅
                                              ↓
                              QoL (슬리핑 ✅, 낮 연장 ✅, 앉기 ✅)
                                              ↓
                                 요리 시스템 ✅ → 도감 Phase A ✅ → 도감 Phase B ✅
                                              ↓
                                     QoL (청크 클레임 ✅, 행동 제한 ✅, 플레이어 초대 ✅)
                                              ↓
                                 인프라: 배포 자동화 ✅ (GitHub Actions + packwiz)
                                              ↓
                              화폐 ✅ → NPC 상인 ✅ → 상인 개선 ✅
                                              ↓
                                 전문 레벨(4-1a) ✅ → 장비 강화(4-1b) ✅ → 현황 GUI(4-1c) ✅ → 장비 기능화(4-1d) ✅ → 레벨/장비 효과(4-3) ✅
```
