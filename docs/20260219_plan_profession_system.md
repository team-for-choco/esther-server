# 전문 분야 시스템 기획 (Phase 4-1)

## 개요
활동별 전문 레벨 + 전용 장비 강화의 이중 성장 시스템.

## 1. 전문 분야

| 분야 | 추적 활동 | 전용 장비 |
|------|-----------|-----------|
| 낚시 | 생선 낚기 | 특수 낚시대 |
| 농사 | 작물 수확 | 특수 호미 |
| 채광 | 광물 채굴 | 특수 곡괭이 |
| 요리 | 조리대 요리 | 특수 조리도구 |

> 추후 RPG 요소 추가 시 분야 확장 가능한 구조로 설계.

## 2. 전문 레벨 (패시브 성장)

- **성장 방식**: 횟수 누적형 (활동 시 경험치 획득)
- **등급별 경험치**: 일반 1xp, 고급 3xp, 희귀 5xp
- **최대 레벨**: 50 (확장 가능)
- **필요 경험치**: 점진 증가 (레벨이 높을수록 더 많이 필요)
- **데이터 저장**: AttachmentType (플레이어별, copyOnDeath)

### 2-1. 경험치 테이블

| 구간 | 레벨당 필요 XP | 해당 구간 총 XP |
|------|---------------|----------------|
| Lv1~10 | 50 | 500 |
| Lv11~20 | 100 | 1,000 |
| Lv21~30 | 200 | 2,000 |
| Lv31~40 | 600 | 6,000 |
| Lv41~50 | 3,000 | 30,000 |

> **총 Lv50 도달: 39,500 XP** (41~50 구간이 전체의 ~76%)

## 3. 전용 장비 강화 (액티브 성장)

- **분야별 전용 아이템 1종**
- **강화 방법**: 대장장이 NPC에게 화폐 지불 + 확률 강화
- **강화 최대 레벨**: 5 (확장 가능)
- **강화 실패 시**: 레벨 유지 (추후 고레벨에서 하락 페널티 가능)
- **화폐 소모처** 역할

### 3-1. 장비 등급

| 강화 레벨 | 등급 | 비고 |
|-----------|------|------|
| Lv0 ~ Lv2 | 일반 | |
| Lv3 ~ Lv4 | 고급 | |
| Lv5 | 희귀 | |

### 3-2. 강화 비용

| 강화 | 비용 (기운) | 추가 재료 |
|------|------------|-----------|
| Lv0 → Lv1 | 1,500 | - |
| Lv1 → Lv2 | 4,500 | - |
| Lv2 → Lv3 | 10,500 | - |
| Lv3 → Lv4 | 22,500 | - |
| Lv4 → Lv5 | 45,000 | 강화석(희귀) x1 |

> 강화석은 시도 시 소멸 (성공/실패 무관).

### 3-3. 강화 확률

| 강화 | 성공 확률 | 기대 시도 | 기대 비용 (기운) |
|------|----------|----------|-----------------|
| Lv0 → Lv1 | 100% | 1회 | 1,500 |
| Lv1 → Lv2 | 80% | 1.25회 | 5,625 |
| Lv2 → Lv3 | 60% | 1.67회 | 17,500 |
| Lv3 → Lv4 | 40% | 2.5회 | 56,250 |
| Lv4 → Lv5 | 15% | 6.67회 | 300,000 + 강화석 ~7개 |

> **Lv5 달성 누적 기대 비용**: 약 380,875 기운 + 강화석 ~7개

### 3-4. 강화석

- **아이템명**: 강화석
- **등급**: 희귀
- **용도**: Lv4 → Lv5 강화 시 1개 필요 (시도 시 소멸)
- **획득 방법**: 활동 드롭 only
  - **채광** — Lv4+ 특수 곡괭이 장착 시 광물 채굴 중 낮은 확률로 드롭
  - **낚시** — Lv4+ 특수 낚시대 장착 시 낚시 중 낮은 확률로 드롭
  - 농사/요리에서는 드롭 불가
- **드롭 확률**: TBD

## 4. 보너스 시스템

**방식: 기본 보너스 x 장비 배율**
- 전문 레벨 → 기본 보너스 (레벨에 비례)
- 장비 강화 → 배율 (기본 보너스에 곱셈)
- 장비 없이 레벨만 → 기본 보너스 그대로
- 레벨 낮고 장비만 → 효과 미미 (둘 다 키워야 시너지)

### 4-1. 장비 배율 (추후 조정)

| 장비 레벨 | 배율 |
|-----------|------|
| Lv0 (미강화) | x1.0 |
| Lv1 | x1.2 |
| Lv2 | x1.5 |
| Lv3 | x2.0 |
| Lv4 | x2.5 |
| Lv5 | x3.5 |

### 4-2. 분야별 보너스 (TBD)

| 분야 | 기본 보너스 후보 | 비고 |
|------|-----------------|------|
| 낚시 | TBD | |
| 농사 | TBD | |
| 채광 | TBD | |
| 요리 | TBD | |

> 분야별 보너스 종류/수치 확정 시 장비 배율도 함께 조정.

## 5. 대장장이 NPC

- **이름**: 대장장이 / Blacksmith
- **엔티티**: 기존 MerchantEntity 재활용 (타입 필드로 구분)
- **외형**: 추후 타입별 텍스처/모델 분리 가능
- **상호작용**: 우클릭 → 강화 GUI
- **강화 GUI**: 장비 선택 → 비용/확률 표시 → 강화 시도

## 6. 전문 분야 현황 UI

- **형태**: 전용 GUI 화면
- **열기 방식**: TBD (키바인드 / 명령어 / 아이템 등)
- **표시 내용**:
  - 분야별 현재 레벨 + 경험치 진행도 바
  - 전용 장비 현재 강화 레벨 + 등급
  - 현재 적용 중인 보너스 수치
- **구현**: 도감 GUI 구조 재활용

## 7. 구현 단계

### 4-1a. 전문 레벨 시스템
- 전문 분야 enum + 데이터 구조
- AttachmentType 기반 플레이어별 경험치/레벨 저장
- 활동 감지 → 경험치 추적 (낚시/수확/채광/요리)
- 등급별 XP 배분 (일반 1 / 고급 3 / 희귀 5)
- 레벨업 로직 + 알림

### 4-1b. 장비 강화 시스템
- 전용 장비 4종 아이템 등록
- 강화석 아이템 등록
- 대장장이 NPC (MerchantEntity 재활용)
- 강화 GUI (비용/확률 표시 + 강화 시도)
- 강화석 드롭 로직 (채광/낚시 Lv4+)

### 4-1c. 전문 분야 현황 GUI
- 분야별 레벨 + 경험치 진행도 바
- 장비 강화 현황
- 적용 중인 보너스 표시

### 4-1d. 분야별 보너스 (미정)
- 보너스 종류/수치 확정 후 진행
- 장비 배율 최종 조정

## 확정 사항
- [x] 경험치 테이블 (레벨별 필요량)
- [x] 등급별 경험치 배분 수치 (일반 1 / 고급 3 / 희귀 5)
- [x] 강화 확률/비용 테이블
- [x] 강화석 획득 방법 (채광/낚시 Lv4+ 장비 드롭)
- [x] 전문 분야 현황 UI 형태 (전용 GUI)
- [x] 대장장이 NPC 이름/엔티티 (대장장이, MerchantEntity 재활용)

## 미결 사항
- [ ] 분야별 구체적 보너스 종류/수치
- [ ] 장비 배율 최종 조정 (보너스 확정 후)
- [ ] 강화석 드롭 확률
- [ ] 현황 UI 열기 방식 (키바인드/명령어/아이템)
- [ ] 대장장이 NPC 외형 (텍스처/모델)
